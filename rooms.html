<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OI APPARO • Music Rooms</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<h1 style="text-align:center;">🎧 OI APPARO – Music Rooms</h1>

<!-- ────── Create / Join Section ────── -->
<section id="room-setup" style="text-align:center;">
  <h2>Create or Join a Room</h2>
  <div id="created-room-info" style="display:none;margin-bottom:12px;">
    ✔️ Room created<br>
    <small>Code:</small> <strong id="created-room-code"></strong>
  </div>

  <input id="room-name-input" placeholder="ROOM NAME (optional)" />
  <input id="room-code-input" placeholder="ROOM CODE" style="text-transform:uppercase" />
  <div style="margin-top:10px;">
    <button id="create-room">➕ Create Room</button>
    <button id="join-room">🔑 Join Room</button>
  </div>
</section>

<!-- ────── Grid of Active Rooms ────── -->
<section>
  <h2 style="text-align:center;margin-top:2rem;">Active Rooms</h2>
  <div id="room-grid" style="display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));width:100%;max-width:900px;margin:1rem auto;"></div>
</section>

<!-- ────── Room Interface ────── -->
<section id="room-interface" style="display:none;max-width:900px;margin:auto;">
  <h2 id="current-room-code"></h2>
  <p id="owner-hint" style="display:none;">(You are the room owner) – you can skip tracks.</p>

  <!-- Video Controls -->
  <div>
    <input id="youtube-url" placeholder="YouTube link" style="width:65%;" />
    <button id="add-track">Add</button>
    <button id="next-track">⏭ Next</button>
  </div>

  <!-- Track List -->
  <ul id="track-list" style="margin-top:12px;list-style:none;padding:0;"></ul>

  <!-- YouTube Player -->
  <div id="yt-player" style="width:100%;aspect-ratio:16/9;margin-top:12px;"></div>

  <!-- Chat Section -->
  <h3 style="margin-top:30px;">🗨️ Chat</h3>
  <div style="border:1px solid #0f0;padding:6px;max-height:200px;overflow:auto;">
    <ul id="chat-list" style="list-style:none;padding:0;margin:0;"></ul>
  </div>
  <input id="chat-input" placeholder="Message..." style="width:75%;" />
  <button id="send-chat">Send</button>

  <p style="margin-top:20px;">
    <a href="#room-setup">← Back to Room Setup</a>
  </p>
</section>

<!-- YouTube Iframe API (must come before rooms.js logic) -->
<script src="https://www.youtube.com/iframe_api"></script>

<!-- Main Logic -->
<script type="module" src="rooms.js"></script>
</body>
</html>
