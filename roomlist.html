<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OI APPARO â€¢ Room List</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>ðŸŽ› Active Rooms</h1>
  <div id="room-grid" style="display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));"></div>

  <p style="text-align:center;margin-top:2rem;">
    <a href="rooms.html" class="nokia-button">âž• Create Room</a>
  </p>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js';
    const db = createClient('https://gycoadvqrogvmrdmxntn.supabase.co', 'YOUR_API_KEY');

    const grid = document.getElementById('room-grid');
    const { data: rooms } = await db.from('rooms').select('*').eq('public', true).order('created_at', { ascending: false });

    rooms.forEach(room => {
      const div = document.createElement('div');
      div.className = 'post';
      div.style.cursor = 'pointer';
      div.onclick = () => window.location = `rooms.html?code=${room.code}`;
      div.innerHTML = `<h3>${room.name || 'Untitled Room'}</h3><p>Code: ${room.code}</p>`;
      grid.appendChild(div);
    });
  </script>
</body>
</html>
